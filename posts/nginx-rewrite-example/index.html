<!DOCTYPE html><html lang="en" mode="dark" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Nginx Rewrite Sample | bulafish@IT</title><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="Nginx Rewrite Sample" /><meta name="author" content="bulafish" /><meta property="og:locale" content="en_US" /><meta name="description" content="Requests were sent from RD department about providing multi languages function on our website. But due to some “nature infrastructure code” issue, they want me to use urls to trigger corresponding language of the web page." /><meta property="og:description" content="Requests were sent from RD department about providing multi languages function on our website. But due to some “nature infrastructure code” issue, they want me to use urls to trigger corresponding language of the web page." /><link rel="canonical" href="https://www.bulafish.com/posts/nginx-rewrite-example/" /><meta property="og:url" content="https://www.bulafish.com/posts/nginx-rewrite-example/" /><meta property="og:site_name" content="bulafish@IT" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-05-03T00:00:00+08:00" /><meta name="google-site-verification" content="p3P3mjxrQL0HjzH4tVCAH1z5-P8CFHGkNPMCMN_N06s" /> <script type="application/ld+json"> {"dateModified":"2018-05-03T00:00:00+08:00","datePublished":"2018-05-03T00:00:00+08:00","description":"Requests were sent from RD department about providing multi languages function on our website. But due to some “nature infrastructure code” issue, they want me to use urls to trigger corresponding language of the web page.","author":{"@type":"Person","name":"bulafish"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.bulafish.com/posts/nginx-rewrite-example/"},"@type":"BlogPosting","url":"https://www.bulafish.com/posts/nginx-rewrite-example/","headline":"Nginx Rewrite Sample","@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --> <script src="/assets/js/post.min.js" async></script> <script src="/app.js" defer></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/littleBlue.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">bulafish@IT</a></div><div class="site-subtitle font-italic">I forget, therefore I blog.</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <a href="https://github.com/" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:window.open('mailto:' + ['',''].join('@'))" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Nginx Rewrite Sample</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Refactor the HTML structure. --> <!-- Suroundding the markdown table with '<div class="table-wrapper">. and '</div>' --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Nginx Rewrite Sample</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, May 3, 2018, 12:00 AM +0800" > May 3, 2018 <i class="unloaded">2018-05-03T00:00:00+08:00</i> </span> by <span class="author"> bulafish </span></div></div><div class="post-content"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4977582061551685" data-ad-slot="3284341851" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><p>Requests were sent from RD department about providing multi languages function on our website. But due to some “nature infrastructure code” issue, they want me to use urls to trigger corresponding language of the web page.</p><p>Since we use nginx, so I thought well, it should be quite simple and easy to achieve it with nginx rewrite function and regular expression, which I am not familiar with both at all. And truth proved me wrong that it took me longer than I thought to fulfill the requirement.</p><p>It took me almost one and half working day to figure it out so I am writing this down for my own future reference and might help anyone in anyway, if.</p><p>There are two requirements</p><ol><li>Append ?lang=xx at the end of the url when page login.html is requested, regardless of what url is entered.</li><li>Append ?lang=xx according to the sub domain entered when page login.html is requested. For instance, if url is xx.example.com/login.html, rewrite to xx.example.com/login.html?lang=xx.</li></ol><p>For requirement one, the nginx rewrite rule is as below. Put the code in server configuration file, inside server block.</p><div class="language-nginx highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">if</span> <span class="s">(</span><span class="nv">$request_uri</span> <span class="p">~</span><span class="sr">*</span> <span class="s">"/login</span><span class="err">\</span><span class="s">.html</span>$<span class="s">")</span> <span class="p">{</span>
    <span class="kn">rewrite</span> <span class="s">^(.*/)login</span><span class="err">\</span><span class="s">.html</span>$ <span class="nv">$scheme</span><span class="p">:</span><span class="n">//</span><span class="nv">$host</span><span class="n">/login.html?en=true</span> <span class="s">permanent</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2018050301.png" alt="nginx rewrite" /></p><p><a href="https://www.webhosting24.com/understanding-nginx-request_uri/">$request_uri</a> = everything behind the domain name. In my case, the $request_uri I am looking for is <code class="language-plaintext highlighter-rouge">/login.html</code>.<br /> <a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#directives">~*</a> = matching of a variable against a regular expression with case-insensitive matching.<br /> <code class="language-plaintext highlighter-rouge">/login\.html$</code> = the pattern I am looking to trigger the rewrite rule.<br /> <code class="language-plaintext highlighter-rouge">\</code> is the escaped character in regular express so that <code class="language-plaintext highlighter-rouge">.</code> is just a <code class="language-plaintext highlighter-rouge">.</code> rather then some special function.<br /> <code class="language-plaintext highlighter-rouge">$</code> means that the pattern must end with what is before it, which in my case is <code class="language-plaintext highlighter-rouge">/index.html</code>.</p><p>So basically, <code class="language-plaintext highlighter-rouge">if ($request_uri ~* "/login\.html$")</code> is saying if <code class="language-plaintext highlighter-rouge">index.html</code> is inside and at the end of the url requested by client, then rewrite.</p><p>Regarding rewrite,<br /> <code class="language-plaintext highlighter-rouge">^(.*)</code> means everything before login.html.<br /> <code class="language-plaintext highlighter-rouge">$scheme</code> = http or https.<br /> <code class="language-plaintext highlighter-rouge">$host</code> = <a href="https://en.wikipedia.org/wiki/Fully_qualified_domain_name">FQDN</a>.</p><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4977582061551685" data-ad-slot="5714917858" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></p><p>So basically <code class="language-plaintext highlighter-rouge">rewrite ^(.*/)login\.html$ $scheme://$host/login.html?en=true permanent;</code> is saying whatever url is entered ended with login.html, rewrite to the entered http protocal + :// + FQDN enter + /login.html?en=true.</p><p>This do the trick. so,<br /> http://hi.test.com/login.html rewrites to http://hi.test.com/login.html?lang=en<br /> https://yo.example.com/login.html rewrites to https://yo.example.com/login.html?lang=en<br /> http://hi.test.com/list.html does nothing.</p><p>For requirement two, the nginx rewrite rule is as below. Put this code inside location / block.</p><div class="language-nginx highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="k">if</span> <span class="s">(</span> <span class="nv">$host</span> <span class="p">=</span> <span class="s">us.test.com)</span><span class="p">{</span>
  <span class="kn">set</span> <span class="nv">$lang</span> <span class="s">us</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="s">(</span> <span class="nv">$host</span> <span class="p">=</span> <span class="s">jp.test.com)</span><span class="p">{</span>
  <span class="kn">set</span> <span class="nv">$lang</span> <span class="s">jp</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="s">(</span><span class="nv">$args</span> <span class="s">!~*</span> <span class="s">lang)</span><span class="p">{</span>
  <span class="kn">set</span> <span class="nv">$lang</span> <span class="s">"</span>$<span class="p">{</span><span class="kn">lang</span><span class="err">}</span><span class="s">t"</span><span class="p">;</span>
<span class="p">}</span>

<span class="kn">if</span> <span class="s">(</span><span class="nv">$lang</span> <span class="p">=</span> <span class="s">ust)</span><span class="p">{</span>
  <span class="kn">rewrite</span> <span class="n">/login.html</span> <span class="n">/login.html?lang=us</span> <span class="s">permanent</span><span class="p">;</span>
<span class="p">}</span>

<span class="kn">if</span> <span class="s">(</span><span class="nv">$lang</span> <span class="p">=</span> <span class="s">jpt)</span><span class="p">{</span>
  <span class="kn">rewrite</span> <span class="n">/login.html</span> <span class="n">/login.html?lang=jp</span> <span class="s">permanent</span><span class="p">;</span>
<span class="p">}</span>      
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2018050302.png" alt="nginx rewrite" /></p><p>Since nginx <code class="language-plaintext highlighter-rouge">if</code> function does not support <code class="language-plaintext highlighter-rouge">and</code> and <code class="language-plaintext highlighter-rouge">or</code> statement, so I used variable to save the requested url.<br /> <code class="language-plaintext highlighter-rouge">$host</code> is the FQDN, save <code class="language-plaintext highlighter-rouge">jp</code> or <code class="language-plaintext highlighter-rouge">us</code> to variable <code class="language-plaintext highlighter-rouge">$lang</code> according to the FQDN entered.</p><p>For some reason I would have infinite loop problem and I can’t figure it out why, after some research, I figure out a way to break the loop, combined with a way to distinguish between jp and us.</p><p><code class="language-plaintext highlighter-rouge">$args</code> = the variable appended to login.html. In my case will be <code class="language-plaintext highlighter-rouge">lang</code>, which is used to store jp or us.<br /> <code class="language-plaintext highlighter-rouge">$args !~* lang</code> = if <code class="language-plaintext highlighter-rouge">lang</code> variable does not exist, then perform rewrite. This is the method I found to break the loop.<br /> <code class="language-plaintext highlighter-rouge">set $lang "${lang}t"</code> = set $lang variable to the current value + t, so <code class="language-plaintext highlighter-rouge">$lang</code> would be either <code class="language-plaintext highlighter-rouge">ust</code> or <code class="language-plaintext highlighter-rouge">jpt</code>, use for later to rewrite the corresponding lang.<br /> Finally check if <code class="language-plaintext highlighter-rouge">$lang</code> is <code class="language-plaintext highlighter-rouge">ust</code> or <code class="language-plaintext highlighter-rouge">jpt</code>, then rewrite <code class="language-plaintext highlighter-rouge">/login.html</code> to <code class="language-plaintext highlighter-rouge">/login.html?lang=us</code> or <code class="language-plaintext highlighter-rouge">/login.html?lang=jp</code> accordingly!</p><p>I am sure there must be better and simplier and smarter way to achieve this but for now, this is the best solution I can figure out to fulfill my requirement.</p><p>REFERENCES:<br /> <a href="http://rosslawley.co.uk/archive/old/2010/01/04/nginx-how-to-multiple-if-statements/">Nginx how to multiple if statements</a><br /> <a href="https://www.nginx.com/resources/wiki/start/topics/depth/ifisevil/">If Is Evil | NGINX</a><br /> <a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite">Module ngx_http_rewrite_module</a><br /> <a href="https://stackoverflow.com/questions/23988344/making-nginx-check-parameter-in-url?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa">Making nginx check parameter in url</a></p></div><div class="post-tail-wrapper text-muted"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4977582061551685" data-ad-slot="4098583858" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/centos/'>CentOS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/nginx/" class="post-tag no-text-decoration" >Nginx</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Nginx Rewrite Sample - bulafish@IT&url=https://www.bulafish.com/posts/nginx-rewrite-example/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Nginx Rewrite Sample - bulafish@IT&u=https://www.bulafish.com/posts/nginx-rewrite-example/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Nginx Rewrite Sample - bulafish@IT&url=https://www.bulafish.com/posts/nginx-rewrite-example/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Create-Org-on-Grafana-and-Set-Privileges/">Create Org on Grafana and Set Privileges</a></li><li><a href="/posts/Configure-Supervisor/">Configure Supervisor</a></li><li><a href="/posts/write-a-new-post/">Writing a New Post</a></li><li><a href="/posts/text-and-typography/">Text and Typography</a></li><li><a href="/posts/Use-CloudWatch-to-Monitor-Billing/">Use CloudWatch to Monitor Billing</a></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/installation/">Installation</a> <a class="post-tag" href="/tags/nginx/">Nginx</a> <a class="post-tag" href="/tags/shell-script/">Shell Script</a> <a class="post-tag" href="/tags/mongodb/">Mongodb</a> <a class="post-tag" href="/tags/jenkins/">Jenkins</a> <a class="post-tag" href="/tags/github-pages/">Github pages</a> <a class="post-tag" href="/tags/ssl/">SSL</a> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/ec2/">EC2</a> <a class="post-tag" href="/tags/cloudwatch/">CloudWatch</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-2">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/use-lets-encrypt-certbot-to-install-free-ssl-on-centos7/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > May 21, 2018 <i class="unloaded">2018-05-21T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Use Lets Encrypt Certbot to Install Free SSL on CentOS7</h3><div class="text-muted small"><p> Since google starts promoting SSL, SSL has become commonly use nowadays and because of this, many companies start to provide free ssl, which Let’s Encrypt is one of the earliest free ssl service pr...</p></div></div></a></div><div class="card"> <a href="/posts/obtain-a+-ssl-security-rating/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > May 24, 2018 <i class="unloaded">2018-05-24T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Obtain A+ SSL Security Rating</h3><div class="text-muted small"><p> In previous post, I have setup SSL with nginx on CentOS7 from letsencrypt. Please refer: Use Lets Encrypt Certbot to Install Free SSL on CentOS7. By default, the security setting of the SSL rating...</p></div></div></a></div><div class="card"> <a href="/posts/nginx-and-php-fpm-permission/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Aug 10, 2018 <i class="unloaded">2018-08-10T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Nginx and PHP-FPM File System Permission</h3><div class="text-muted small"><p> When Nginx is using socket to communicate with PHP-FPM, in the PHP-FPM configuration file, the section below must be configured. Assuming that Nginx is running with user nginx, the socket file must...</p></div></div></a></div></div></div><!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/ncdu-linux-alternate-choice-for-treesize/" class="btn btn-outline-primary"><p>Ncdu Linux Alternate Choice For Treesize</p></a> <a href="/posts/rc.local-is-not-working-in-centos7/" class="btn btn-outline-primary"><p>/etc/rc.d/rc.local is not working in CentOS7</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> Copyright © 2020 <a href=""></a> <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">bulafish@IT</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/installation/">Installation</a> <a class="post-tag" href="/tags/nginx/">Nginx</a> <a class="post-tag" href="/tags/shell-script/">Shell Script</a> <a class="post-tag" href="/tags/mongodb/">Mongodb</a> <a class="post-tag" href="/tags/jenkins/">Jenkins</a> <a class="post-tag" href="/tags/github-pages/">Github pages</a> <a class="post-tag" href="/tags/ssl/">SSL</a> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/ec2/">EC2</a> <a class="post-tag" href="/tags/cloudwatch/">CloudWatch</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-174207146-1', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.bulafish.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
